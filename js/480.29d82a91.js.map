{"version":3,"file":"js/480.29d82a91.js","mappings":"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","sources":["webpack://week6/./src/views/front/CartRecipient.vue","webpack://week6/./src/views/front/CartRecipient.vue?8f00"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <!-- Loading -->\n    <vue-loading\n      :active=\"isLoading\"\n      :is-full-page=\"fullPage\"\n      background-color=\"black\"\n    >\n      <div class=\"loading-ice\"></div>\n    </vue-loading>\n    <!-- 購物流程 -->\n    <ul class=\"cart-intro\">\n      <li class=\"cart-card\">\n        <div class=\"cardImg\">\n          <span class=\"material-icons\"> shopping_cart </span>\n        </div>\n        <h4>STEP.1</h4>\n        <p>確認選購</p>\n      </li>\n      <li class=\"cart-card\">\n        <div class=\"cardImg cart-now cart-now-border\">\n          <span class=\"material-icons\"> format_list_bulleted </span>\n        </div>\n        <h4 class=\"cart-now\">STEP.2</h4>\n        <p class=\"cart-now\">資料填寫</p>\n      </li>\n      <li class=\"cart-card\">\n        <div class=\"cardImg\">\n          <span class=\"material-icons\"> done </span>\n        </div>\n        <h4>STEP.3</h4>\n        <p>預定成功</p>\n      </li>\n    </ul>\n    <!-- 訂購商品列表 -->\n    <h2 class=\"text-center mt-3\">訂單內容</h2>\n    <table class=\"table align-middle\">\n      <thead>\n        <tr>\n          <th>品名</th>\n          <th>數量/單位</th>\n          <th>單價</th>\n          <th></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in cartData.carts\" :key=\"item.id\">\n          <td>\n            {{ item.product.title }}\n          </td>\n          <td>{{ item.qty }} {{ item.product.unit }}</td>\n          <td>{{ $filters.currency(item.product.price) }}</td>\n          <td class=\"text-end\">\n            <small>品項金額:</small>\n            {{ $filters.currency(item.total) }}\n          </td>\n        </tr>\n      </tbody>\n      <tfoot>\n        <tr>\n          <td />\n          <td />\n          <td />\n          <td class=\"text-end text-success\">總計： {{ $filters.currency(cartData.total) }}\n              <span v-if=\"cartData.final_total !== cartData.total\" class=\"text-info\">\n                <br>優惠價： {{ $filters.currency(cartData.final_total) }}\n              </span>\n          </td>\n        </tr>\n      </tfoot>\n    </table>\n    <!-- 資料填寫 -->\n    <h2 class=\"text-center\">資料填寫</h2>\n    <div class=\"my-3 row justify-content-center\">\n      <vue-Form\n        ref=\"form\"\n        class=\"col-md-6\"\n        v-slot=\"{ errors }\"\n        @submit=\"sendOrder\"\n      >\n        <div class=\"mb-3\">\n          <label for=\"email\" class=\"form-label\"\n            >Email <span class=\"text-danger\">*</span></label\n          >\n          <vue-Field\n            id=\"email\"\n            name=\"email\"\n            type=\"email\"\n            class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['email'] }\"\n            placeholder=\"請輸入 Email\"\n            rules=\"email|required\"\n            v-model=\"form.user.email\"\n          ></vue-Field>\n          <ErrorMessage name=\"email\" class=\"invalid-feedback\"></ErrorMessage>\n        </div>\n\n        <div class=\"mb-3\">\n          <label for=\"name\" class=\"form-label\"\n            >收件人姓名 <span class=\"text-danger\">*</span></label\n          >\n          <vue-Field\n            id=\"name\"\n            name=\"姓名\"\n            type=\"text\"\n            class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['姓名'] }\"\n            placeholder=\"請輸入姓名\"\n            rules=\"required\"\n            v-model=\"form.user.name\"\n          ></vue-Field>\n          <ErrorMessage name=\"姓名\" class=\"invalid-feedback\"></ErrorMessage>\n        </div>\n\n        <div class=\"mb-3\">\n          <label for=\"tel\" class=\"form-label\"\n            >收件人電話 <span class=\"text-danger\">*</span></label\n          >\n          <vue-Field\n            id=\"tel\"\n            name=\"電話\"\n            type=\"tel\"\n            class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['電話'] }\"\n            placeholder=\"請輸入電話\"\n            :rules=\"isPhone\"\n            v-model=\"form.user.tel\"\n          ></vue-Field>\n          <ErrorMessage name=\"電話\" class=\"invalid-feedback\"></ErrorMessage>\n        </div>\n\n        <div class=\"mb-3\">\n          <label for=\"address\" class=\"form-label\"\n            >收件人地址 <span class=\"text-danger\">*</span></label\n          >\n          <vue-Field\n            id=\"address\"\n            name=\"地址\"\n            type=\"text\"\n            class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['地址'] }\"\n            placeholder=\"請輸入地址\"\n            rules=\"required\"\n            v-model=\"form.user.address\"\n          ></vue-Field>\n          <ErrorMessage name=\"地址\" class=\"invalid-feedback\"></ErrorMessage>\n        </div>\n\n        <div class=\"mb-3\">\n          <label for=\"message\" class=\"form-label\">留言</label>\n          <textarea\n            id=\"message\"\n            class=\"form-control\"\n            cols=\"30\"\n            rows=\"10\"\n            v-model=\"form.message\"\n          ></textarea>\n        </div>\n        <div class=\"text-end\">\n          <button\n            type=\"submit\"\n            class=\"btn btn-danger btn-lg\"\n            :disabled=\"\n              Object.keys(errors).length > 0 || cartData.final_total == 0\n            \"\n          >\n            送出訂單\n          </button>\n        </div>\n      </vue-Form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/libs/emitter'\n\nexport default {\n  data () {\n    return {\n      cartData: {},\n      products: [],\n      productId: '',\n      isLoading: false,\n      fullPage: true,\n      isLoadingitem: '',\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: ''\n        },\n        message: ''\n      }\n    }\n  },\n  methods: {\n    getProducts () {\n      const vm = this\n      vm.isLoading = true\n      this.$http\n        .get(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`\n        )\n        .then((res) => {\n          this.products = res.data.products\n          vm.isLoading = false\n        })\n        .catch((err) => {\n          this.$httpMessageState(err.response, '錯誤！')\n        })\n    },\n    getCart () {\n      const vm = this\n      vm.isLoading = true\n      this.$http.get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`)\n        .then(res => {\n          this.cartData = res.data.data\n          vm.isLoading = false\n        })\n        .catch((err) => {\n          this.$httpMessageState(err.response, '錯誤！')\n        })\n    },\n    sendOrder () {\n      this.isLoadingitem = 1\n      const order = this.form\n      this.$http.post(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order`, { data: order })\n        .then(() => {\n          this.isLoadingitem = ''\n          emitter.emit('get-cart')\n          this.getCart()\n          alert('訂單已送出！')\n          this.$refs.form.resetForm()\n          this.$router.push('/cartfinish')\n        }).catch((err) => {\n          this.$httpMessageState(err.response, '錯誤！')\n        })\n    },\n    isPhone (value) {\n      const phoneNumber = /^(09)[0-9]{8}$/\n      return phoneNumber.test(value) ? true : '需要正確的電話號碼'\n    }\n  },\n  mounted () {\n    this.getProducts()\n    this.getCart()\n  }\n}\n</script>\n\n<style>\n@media (max-width: 767px) {\n  .cart li {\n    margin-bottom: 20px;\n  }\n}\n\n.cart-intro {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  max-width: 700px;\n  margin: 0 auto;\n}\n\n@media (max-width: 767px) {\n  .cart-intro {\n    margin-top: 90px;\n    padding-left: 0;\n  }\n}\n\n.cart-intro li:nth-child(1),\n.cart-intro li:nth-child(2) {\n  position: relative;\n}\n\n.cart-intro li:nth-child(1)::after,\n.cart-intro li:nth-child(2)::after {\n  content: \"\";\n  position: absolute;\n  top: 49px;\n  right: -55px;\n  border: 10px solid #000000;\n  border-top: 10px solid transparent;\n  border-right: 10px solid transparent;\n  border-bottom: 10px solid transparent;\n}\n\n@media (max-width: 767px) {\n  .cart-intro li:nth-child(1)::after,\n  .cart-intro li:nth-child(2)::after {\n    top: 49px;\n    right: -35px;\n  }\n}\n\n.cart-card {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n}\n\n.cart-card .cardImg {\n  width: 115px;\n  height: 115px;\n  border: 3px solid #000000;\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.cart-card .material-icons {\n  font-size: 50px;\n}\n\n.cart-card h4 {\n  font-size: 1.25rem;\n  font-weight: bold;\n}\n\n@media (max-width: 767px) {\n  .cart-card .cardImg {\n    width: 75px;\n    height: 75px;\n  }\n}\n.cart-card .cart-now {\n  color: rgba(220, 113, 6, 0.865);\n}\n\n.cart-card .cart-now-border {\n  border: 3px solid rgba(220, 113, 6, 0.865);\n}\n</style>\n","import { render } from \"./CartRecipient.vue?vue&type=template&id=1ec4d6ca\"\nimport script from \"./CartRecipient.vue?vue&type=script&lang=js\"\nexport * from \"./CartRecipient.vue?vue&type=script&lang=js\"\n\nimport \"./CartRecipient.vue?vue&type=style&index=0&id=1ec4d6ca&lang=css\"\n\nimport exportComponent from \"/Users/alberto/Vue/temp/Vue_SnowBro/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","for","_createElementBlock","_createVNode","_component_vue_loading","active","$data","_hoisted_2","_hoisted_3","_hoisted_6","_Fragment","_renderList","carts","item","key","id","_toDisplayString","product","title","qty","unit","_ctx","currency","price","_hoisted_8","total","_hoisted_9","_hoisted_10","_hoisted_11","final_total","_hoisted_14","_hoisted_15","_component_vue_Form","ref","onSubmit","$options","errors","_hoisted_18","_component_vue_Field","name","type","placeholder","rules","user","email","$event","_component_ErrorMessage","_hoisted_20","_hoisted_22","tel","_hoisted_24","address","_hoisted_26","cols","rows","message","disabled","Object","keys","length","_hoisted_28","data","cartData","products","productId","isLoading","fullPage","isLoadingitem","form","methods","getProducts","vm","this","$http","get","then","res","catch","err","$httpMessageState","response","getCart","sendOrder","order","post","emitter","alert","$refs","resetForm","$router","push","isPhone","value","phoneNumber","test","mounted","__exports__","render"],"sourceRoot":""}