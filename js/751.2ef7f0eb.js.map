{"version":3,"file":"js/751.2ef7f0eb.js","mappings":"iMACOA,MAAM,a,GACTC,EAAAA,EAAAA,GAAsC,MAAlCD,MAAM,oBAAmB,QAAI,G,GAO/BC,EAAAA,EAAAA,GAA+B,OAA1BD,MAAM,eAAa,S,GAErBA,MAAM,O,GAEJA,MAAM,2B,GACJA,MAAM,mB,GACJA,MAAM,gC,GACJA,MAAM,qC,GAaNA,MAAM,qC,GAaNA,MAAM,qC,GAaNA,MAAM,qC,GAaNA,MAAM,qC,GAaNA,MAAM,qC,GAiBZA,MAAM,mB,GAEPA,MAAM,+BACN,WAAS,eACT,oBAAkB,Q,iBAGXA,MAAM,c,GAMJA,MAAM,a,GACLA,MAAM,c,GAERA,MAAM,0C,GAIHA,MAAM,uC,2BAcLC,EAAAA,EAAAA,GAAqE,QAA/DD,MAAM,2CAA0C,YAAQ,G,GAA9DE,G,aAGAD,EAAAA,EAAAA,GAAmE,QAA7DD,MAAM,yCAAwC,YAAQ,G,GAA5DG,G,sCAkBPH,MAAM,Q,GACJ,aAAW,2B,GACVA,MAAM,qC,GAQJC,EAAAA,EAAAA,GAAuC,QAAjC,cAAY,QAAO,KAAO,G,GAAhCG,G,iBAuBAH,EAAAA,EAAAA,GAAuC,QAAjC,cAAY,QAAO,KAAO,G,GAAhCI,G,oGAzLlBC,EAAAA,EAAAA,IAkMM,MAlMN,EAkMM,CAjMJC,GAEAC,EAAAA,EAAAA,IAMcC,EAAA,CALXC,OAAQC,EAAAA,UACR,eAAcA,EAAAA,SACf,mBAAiB,SAHnB,C,kBAKE,IAA+B,CAA/BC,K,KALF,8BAOAX,EAAAA,EAAAA,GAuLM,MAvLN,EAuLM,EArLJA,EAAAA,EAAAA,GAmFM,MAnFN,EAmFM,EAlFJA,EAAAA,EAAAA,GAiFM,MAjFN,EAiFM,EAhFJA,EAAAA,EAAAA,GA+EM,MA/EN,EA+EM,EA9EJA,EAAAA,EAAAA,GAYM,MAZN,EAYM,EAXJA,EAAAA,EAAAA,GAUS,UATPY,KAAK,SACLb,MAAM,kEAKLc,QAAK,eAAEC,EAAAA,gBACT,aAIHd,EAAAA,EAAAA,GAYM,MAZN,EAYM,EAXJA,EAAAA,EAAAA,GAUS,UATPY,KAAK,SACLb,MAAM,kEAKLc,QAAK,eAAEC,EAAAA,YAAW,SACpB,YAIHd,EAAAA,EAAAA,GAYM,MAZN,EAYM,EAXJA,EAAAA,EAAAA,GAUS,UATPY,KAAK,SACLb,MAAM,kEAKLc,QAAK,eAAEC,EAAAA,YAAW,QACpB,WAIHd,EAAAA,EAAAA,GAYM,MAZN,EAYM,EAXJA,EAAAA,EAAAA,GAUS,UATPY,KAAK,SACLb,MAAM,kEAKLc,QAAK,eAAEC,EAAAA,YAAW,SACpB,YAIHd,EAAAA,EAAAA,GAYM,MAZN,EAYM,EAXJA,EAAAA,EAAAA,GAUS,UATPY,KAAK,SACLb,MAAM,kEAKLc,QAAK,eAAEC,EAAAA,YAAW,QACpB,WAIHd,EAAAA,EAAAA,GAYM,MAZN,EAYM,EAXJA,EAAAA,EAAAA,GAUS,UATPY,KAAK,SACLb,MAAM,kEAKLc,QAAK,eAAEC,EAAAA,YAAW,SACpB,kBAQTd,EAAAA,EAAAA,GA+FM,MA/FN,EA+FM,EA9FJA,EAAAA,EAAAA,GAmDM,MAnDN,EAmDM,gBA9CJK,EAAAA,EAAAA,IA6CMU,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IA7CkCN,EAAAA,UAAXO,K,WAA7BZ,EAAAA,EAAAA,IA6CM,OA7CDN,MAAM,WAAwCmB,IAAKD,EAAQE,GAAKN,QAAK,GAAEC,EAAAA,YAAYG,EAAQE,KAAhG,EACEnB,EAAAA,EAAAA,GA2CM,MA3CN,EA2CM,EA1CJO,EAAAA,EAAAA,IAIea,EAAA,CAHZC,GAAE,YAAcJ,EAAQE,KACxBG,OAAK,SAAAC,gBAAAA,OAA4BN,EAAQO,cAC1CzB,MAAM,iBAHR,wBAKAC,EAAAA,EAAAA,GAoCM,MApCN,EAoCM,EAnCJA,EAAAA,EAAAA,GAA+C,KAA/C,GAA+CyB,EAAAA,EAAAA,IAArBR,EAAQS,OAAK,IACvC1B,EAAAA,EAAAA,GAII,IAJJ,GAIIyB,EAAAA,EAAAA,IADCR,EAAQU,aAAW,IAExB3B,EAAAA,EAAAA,GA4BM,MA5BN,EA4BM,EA3BJA,EAAAA,EAAAA,GAMS,UALPY,KAAK,SACLb,MAAM,uBACLc,QAAK,yBAAUC,EAAAA,YAAYc,EAAAA,KAAKT,KAAE,eACpC,WAGDnB,EAAAA,EAAAA,GAWS,UAVPY,KAAK,SACLb,MAAM,uBACLc,SAAK,YAAUC,EAAAA,eAAeG,EAAQE,KAAE,cAH3C,CAKaT,EAAAA,SAASmB,SAASZ,EAAQE,MAA1B,WAAXd,EAAAA,EAAAA,IAEM,MAAAyB,EAAAC,MAFN,WAGA1B,EAAAA,EAAAA,IAEM,MAAA2B,EAAAC,KAVR,MAYAjC,EAAAA,EAAAA,GAOS,UANPY,KAAK,SACLb,MAAM,yBACLc,SAAK,YAAUC,EAAAA,UAAUG,EAAQE,KAAE,aACnCe,SAAUxB,EAAAA,gBAAkBO,EAAQE,IAAMF,EAAQkB,IAAG,GACvD,UAED,EAAAC,UAzCR,gBAgDS1B,EAAAA,cAAAA,EAAAA,EAAAA,OAAXL,EAAAA,EAAAA,IAwCM,MAAAgC,EAAA,EAvCJrC,EAAAA,EAAAA,GAsCM,MAtCN,EAsCM,EArCJA,EAAAA,EAAAA,GAoCM,MApCN,EAoCM,EAnCJA,EAAAA,EAAAA,GAkCK,KAlCL,EAkCK,EAjCHA,EAAAA,EAAAA,GASK,MATDD,OAAK,SAAC,YAAW,CAAAmC,UAAsBxB,EAAAA,MAAM4B,YAAjD,EACEtC,EAAAA,EAAAA,GAOI,KANFD,MAAM,YACNwC,KAAK,IACL,aAAW,WACV1B,QAAK,yBAAUC,EAAAA,YAAYJ,EAAAA,MAAM8B,aAAY,mBAJhD,IADF,KAiCG,aAvBHnC,EAAAA,EAAAA,IAYKU,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IATYN,EAAAA,MAAM+B,aAAdC,K,WAHTrC,EAAAA,EAAAA,IAYK,MAXHN,OAAK,SAAC,YAAW,CAAAU,OACCiC,IAAShC,EAAAA,MAAM8B,gBAEhCtB,IAAKwB,EAAO,QAJf,EAME1C,EAAAA,EAAAA,GAKC,KAJCD,MAAM,YACNwC,KAAK,IACJ1B,SAAK,YAAUC,EAAAA,YAAY4B,IAAI,eAHlC,QAIMA,GAAI,EAAAC,IAVZ,aAaA3C,EAAAA,EAAAA,GASK,MATDD,OAAK,SAAC,YAAW,CAAAmC,UAAsBxB,EAAAA,MAAMkC,aAAjD,EACE5C,EAAAA,EAAAA,GAOI,KANFD,MAAM,YACNwC,KAAK,IACL,aAAW,OACV1B,QAAK,yBAAUC,EAAAA,YAAYJ,EAAAA,MAAM8B,aAAY,mBAJhD,IADF,aA3BR,qB,cAiDR,GACEK,OACE,MAAO,CACLC,SAAU,GACVC,cAAe,GACfC,MAAO,GACPC,SAAUC,KAAKC,MAAMC,aAAaC,QAAQ,cAAgB,GAC1DC,WAAW,EACXC,UAAU,EACVC,aAAa,EACbC,aAAc,CACZZ,KAAM,CACJa,SAAS,IAGbC,cAAe,CACbd,KAAM,CACJa,QAAS,MAKjBE,QAAS,CACPC,YAAanB,EAAO,GAClB,MAAMoB,EAAKC,KACXD,EAAGR,WAAY,EACfS,KAAKC,MAAO,mEAA2EtB,KACpFuB,MAAKC,IACJH,KAAKjB,SAAWoB,EAAIrB,KAAKC,SACzBiB,KAAKf,MAAQkB,EAAIrB,KAAKsB,WACtBL,EAAGR,WAAY,EACfS,KAAKP,aAAc,KAEpBY,OAAOC,IACNN,KAAKO,kBAAkBD,EAAIE,SAAU,WAG3CC,YAAaC,GACX,MAAMX,EAAKC,KACXD,EAAGR,WAAY,EACfS,KAAKC,MAAO,uEAA+ES,KACxFR,MAAKC,IACJH,KAAKjB,SAAWoB,EAAIrB,KAAKC,SACzBiB,KAAKP,aAAc,EACnBM,EAAGR,WAAY,KAEhBc,OAAOC,IACNN,KAAKO,kBAAkBD,EAAIE,SAAU,WAG3CG,UAAWvD,EAAIgB,EAAM,GACnB,MAAMU,EAAO,CACX8B,WAAYxD,EACZgB,IAAAA,GAEI2B,EAAKC,KACXD,EAAGR,WAAY,EACfS,KAAKhB,cAAgB5B,EACrB4C,KAAKC,MACFY,KACE,yDACD,CAAE/B,KAAAA,IAEHoB,MAAMC,IACLH,KAAKhB,cAAgB,GACrB8B,EAAAA,EAAAA,KAAa,YACbd,KAAKe,UACLhB,EAAGR,WAAY,EACfS,KAAKO,kBAAkBJ,EAAK,aAE7BE,OAAOC,IACNN,KAAKO,kBAAkBD,EAAIE,SAAU,UAEzCQ,MAAMC,mBAERF,UACEf,KAAKC,MAAMiB,IAAK,0DACbhB,MAAKC,IACJH,KAAKmB,SAAWhB,EAAIrB,KAAKA,QAE1BuB,OAAOC,IACNN,KAAKO,kBAAkBD,EAAIE,SAAU,WAG3CY,eAAgBhE,GACd,MAAMiE,EAAgBrB,KAAKd,SAASoC,WAAWC,GAASA,IAASnE,KAC1C,IAAnBiE,GACFrB,KAAKd,SAASsC,KAAKpE,GACnB4C,KAAKO,kBAAkBP,KAAKN,aAAc,UAE1CM,KAAKd,SAASuC,OAAOJ,EAAe,GACpCrB,KAAKO,kBAAkBP,KAAKJ,cAAe,SAE7CoB,MAAMC,mBAERS,YAAatE,GACX4C,KAAK2B,QAAQH,KAAM,YAAWpE,OAGlCwE,MAAO,CACL1C,SAAU,CACR2C,UACExC,aAAayC,QAAQ,WAAY3C,KAAK4C,UAAU/B,KAAKd,YAEvD8C,MAAM,IAGVC,UACEjC,KAAKF,gB,UC9ST,MAAMoC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE","sources":["webpack://week6/./src/views/front/ProductsView.vue","webpack://week6/./src/views/front/ProductsView.vue?d3b5"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <h2 class=\"text-center mb-3\">產品列表</h2>\n    <!-- Loading -->\n    <vue-loading\n      :active=\"isLoading\"\n      :is-full-page=\"fullPage\"\n      background-color=\"black\"\n    >\n      <div class=\"loading-ice\"></div>\n    </vue-loading>\n    <div class=\"row\">\n      <!-- 篩選 -->\n      <div class=\"d-block col-12 col-lg-3\">\n        <div class=\"list-group my-3\">\n          <div class=\"row row-cols-2 row-cols-md-1\">\n            <div class=\"col d-flex justify-content-center\">\n              <button\n                type=\"button\"\n                class=\"\n                  btn btn-primary\n                  list-group-item list-group-item-action\n                  cart-btn\n                \"\n                @click=\"getProducts()\"\n              >\n                全部商品\n              </button>\n            </div>\n            <div class=\"col d-flex justify-content-center\">\n              <button\n                type=\"button\"\n                class=\"\n                  btn btn-primary\n                  list-group-item list-group-item-action\n                  cart-btn\n                \"\n                @click=\"getCategory('滑雪服')\"\n              >\n                滑雪服\n              </button>\n            </div>\n            <div class=\"col d-flex justify-content-center\">\n              <button\n                type=\"button\"\n                class=\"\n                  btn btn-primary\n                  list-group-item list-group-item-action\n                  cart-btn\n                \"\n                @click=\"getCategory('雪板')\"\n              >\n                雪板\n              </button>\n            </div>\n            <div class=\"col d-flex justify-content-center\">\n              <button\n                type=\"button\"\n                class=\"\n                  btn btn-primary\n                  list-group-item list-group-item-action\n                  cart-btn\n                \"\n                @click=\"getCategory('護目鏡')\"\n              >\n                護目鏡\n              </button>\n            </div>\n            <div class=\"col d-flex justify-content-center\">\n              <button\n                type=\"button\"\n                class=\"\n                  btn btn-primary\n                  list-group-item list-group-item-action\n                  cart-btn\n                \"\n                @click=\"getCategory('手套')\"\n              >\n                手套\n              </button>\n            </div>\n            <div class=\"col d-flex justify-content-center\">\n              <button\n                type=\"button\"\n                class=\"\n                  btn btn-primary\n                  list-group-item list-group-item-action\n                  cart-btn\n                \"\n                @click=\"getCategory('安全帽')\"\n              >\n                安全帽\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- 產品呈現 -->\n      <div class=\"col-12 col-lg-9\">\n        <div\n          class=\"row row-cols-1 row-cols-lg-3\"\n          data-aos=\"zoom-in-down\"\n          data-aos-duration=\"1200\"\n        >\n          <div class=\"col mb-3\" v-for=\"product in products\" :key=\"product.id\" @click=\"goToProduct(product.id)\">\n            <div class=\"card h-100\">\n              <router-link\n                :to=\"`/product/${product.id}`\"\n                :style=\"{ backgroundImage: `url(${product.imageUrl})` }\"\n                class=\"product-image\"\n              ></router-link>\n              <div class=\"card-body\">\n                <h5 class=\"card-title\">{{ product.title }}</h5>\n                <p\n                  class=\"card-text text-muted mb-0 card-descrip\"\n                >\n                  {{ product.description }}\n                </p>\n                <div class=\"d-flex justify-content-between mt-3\">\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-outline-info\"\n                    @click.prevent=\"goToProduct(item.id)\"\n                  >\n                  產品細節\n                  </button>\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-outline-info\"\n                    @click.prevent=\"toggleFavorite(product.id)\"\n                  >\n                    <div v-if=\"favorite.includes(product.id)\">\n                      <span class=\"material-icons text-danger align-middle\">favorite</span>\n                    </div>\n                    <div v-else>\n                      <span class=\"material-icons text-dark align-middle\">favorite</span>\n                    </div>\n                  </button>\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-outline-danger\"\n                    @click.prevent=\"addToCart(product.id)\"\n                    :disabled=\"isLoadingitem === product.id || product.qty > 5\"\n                  >\n                    加到購物車\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <!-- 分頁 -->\n        <div v-if=\"isNotOption\">\n          <div class=\"mb-3\">\n            <nav aria-label=\"Page navigation example\">\n              <ul class=\"pagination justify-content-center\">\n                <li class=\"page-item\" :class=\"{ disabled: !pages.has_pre }\">\n                  <a\n                    class=\"page-link\"\n                    href=\"#\"\n                    aria-label=\"Previous\"\n                    @click.prevent=\"getProducts(pages.current_page - 1)\"\n                  >\n                    <span aria-hidden=\"true\">&laquo;</span>\n                  </a>\n                </li>\n                <li\n                  class=\"page-item\"\n                  :class=\"{ active: page === pages.current_page }\"\n                  v-for=\"page in pages.total_pages\"\n                  :key=\"page + 'page'\"\n                >\n                  <a\n                    class=\"page-link\"\n                    href=\"#\"\n                    @click.prevent=\"getProducts(page)\"\n                    >{{ page }}</a\n                  >\n                </li>\n                <li class=\"page-item\" :class=\"{ disabled: !pages.has_next }\">\n                  <a\n                    class=\"page-link\"\n                    href=\"#\"\n                    aria-label=\"Next\"\n                    @click.prevent=\"getProducts(pages.current_page + 1)\"\n                  >\n                    <span aria-hidden=\"true\">&raquo;</span>\n                  </a>\n                </li>\n              </ul>\n            </nav>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/libs/emitter'\n\nexport default {\n  data () {\n    return {\n      products: [],\n      isLoadingitem: '',\n      pages: {},\n      favorite: JSON.parse(localStorage.getItem('favorite')) || [],\n      isLoading: false,\n      fullPage: true,\n      isNotOption: true,\n      forToastTrue: {\n        data: {\n          success: true\n        }\n      },\n      forToastFalse: {\n        data: {\n          success: 0\n        }\n      }\n    }\n  },\n  methods: {\n    getProducts (page = 1) {\n      const vm = this\n      vm.isLoading = true\n      this.$http(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products?page=${page}`)\n        .then(res => {\n          this.products = res.data.products\n          this.pages = res.data.pagination\n          vm.isLoading = false\n          this.isNotOption = true\n        })\n        .catch((err) => {\n          this.$httpMessageState(err.response, '錯誤！')\n        })\n    },\n    getCategory (category) {\n      const vm = this\n      vm.isLoading = true\n      this.$http(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products?category=${category}`)\n        .then(res => {\n          this.products = res.data.products\n          this.isNotOption = false\n          vm.isLoading = false\n        })\n        .catch((err) => {\n          this.$httpMessageState(err.response, '錯誤！')\n        })\n    },\n    addToCart (id, qty = 1) {\n      const data = {\n        product_id: id,\n        qty\n      }\n      const vm = this\n      vm.isLoading = true\n      this.isLoadingitem = id\n      this.$http\n        .post(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`,\n          { data }\n        )\n        .then((res) => {\n          this.isLoadingitem = ''\n          emitter.emit('get-cart')\n          this.getCart()\n          vm.isLoading = false\n          this.$httpMessageState(res, '已加入購物車')\n        })\n        .catch((err) => {\n          this.$httpMessageState(err.response, '錯誤！')\n        })\n      event.stopPropagation()\n    },\n    getCart () {\n      this.$http.get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`)\n        .then(res => {\n          this.cartData = res.data.data\n        })\n        .catch((err) => {\n          this.$httpMessageState(err.response, '錯誤！')\n        })\n    },\n    toggleFavorite (id) {\n      const favoriteIndex = this.favorite.findIndex((item) => item === id)\n      if (favoriteIndex === -1) {\n        this.favorite.push(id)\n        this.$httpMessageState(this.forToastTrue, '加入最愛')\n      } else {\n        this.favorite.splice(favoriteIndex, 1)\n        this.$httpMessageState(this.forToastFalse, '移出最愛')\n      }\n      event.stopPropagation()\n    },\n    goToProduct (id) {\n      this.$router.push(`/product/${id}`)\n    }\n  },\n  watch: {\n    favorite: {\n      handler () {\n        localStorage.setItem('favorite', JSON.stringify(this.favorite))\n      },\n      deep: true\n    }\n  },\n  mounted () {\n    this.getProducts()\n  }\n}\n</script>\n\n<style>\n.loading-ice {\n  height: 160px;\n  width: 160px;\n  background: url(\"@/photos/loading-ice.png\");\n}\n.product-image {\n  height: 300px;\n  background-size: contain;\n  background-position: center center;\n  background-repeat: no-repeat;\n}\n.product-image:hover {\n  background-size: cover;\n  background-size: 105%;\n}\n.cart-btn {\n  width: 50%;\n}\n@media (max-width: 767px) {\n  .cart-btn {\n    width: 100%;\n  }\n}\n.card-descrip{\nheight: 4.5rem;\noverflow: hidden;\n}\n</style>\n","import { render } from \"./ProductsView.vue?vue&type=template&id=6b32cad4\"\nimport script from \"./ProductsView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsView.vue?vue&type=script&lang=js\"\n\nimport \"./ProductsView.vue?vue&type=style&index=0&id=6b32cad4&lang=css\"\n\nimport exportComponent from \"/Users/alberto/Vue/temp/Vue_SnowBro/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_24","_hoisted_27","_hoisted_34","_hoisted_37","_createElementBlock","_hoisted_2","_createVNode","_component_vue_loading","active","$data","_hoisted_3","type","onClick","$options","_Fragment","_renderList","product","key","id","_component_router_link","to","style","backgroundImage","imageUrl","_toDisplayString","title","description","_ctx","includes","_hoisted_23","_hoisted_25","_hoisted_26","_hoisted_28","disabled","qty","_hoisted_29","_hoisted_30","has_pre","href","current_page","total_pages","page","_hoisted_36","has_next","data","products","isLoadingitem","pages","favorite","JSON","parse","localStorage","getItem","isLoading","fullPage","isNotOption","forToastTrue","success","forToastFalse","methods","getProducts","vm","this","$http","then","res","pagination","catch","err","$httpMessageState","response","getCategory","category","addToCart","product_id","post","emitter","getCart","event","stopPropagation","get","cartData","toggleFavorite","favoriteIndex","findIndex","item","push","splice","goToProduct","$router","watch","handler","setItem","stringify","deep","mounted","__exports__","render"],"sourceRoot":""}