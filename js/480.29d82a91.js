"use strict";(self["webpackChunkweek6"]=self["webpackChunkweek6"]||[]).push([[480],{2480:function(e,a,l){l.r(a),l.d(a,{default:function(){return F}});var s=l(6252),t=l(3577),r=l(9963);const i={class:"container"},n=(0,s._)("div",{class:"loading-ice"},null,-1),c=(0,s.uE)('<ul class="cart-intro"><li class="cart-card"><div class="cardImg"><span class="material-icons"> shopping_cart </span></div><h4>STEP.1</h4><p>確認選購</p></li><li class="cart-card"><div class="cardImg cart-now cart-now-border"><span class="material-icons"> format_list_bulleted </span></div><h4 class="cart-now">STEP.2</h4><p class="cart-now">資料填寫</p></li><li class="cart-card"><div class="cardImg"><span class="material-icons"> done </span></div><h4>STEP.3</h4><p>預定成功</p></li></ul><h2 class="text-center mt-3">訂單內容</h2>',2),o={class:"table align-middle"},d=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"品名"),(0,s._)("th",null,"數量/單位"),(0,s._)("th",null,"單價"),(0,s._)("th")])],-1),u={class:"text-end"},m=(0,s._)("small",null,"品項金額:",-1),p=(0,s._)("td",null,null,-1),h=(0,s._)("td",null,null,-1),f=(0,s._)("td",null,null,-1),_={class:"text-end text-success"},g={key:0,class:"text-info"},b=(0,s._)("br",null,null,-1),v=(0,s._)("h2",{class:"text-center"},"資料填寫",-1),w={class:"my-3 row justify-content-center"},k={class:"mb-3"},x=(0,s._)("label",{for:"email",class:"form-label"},[(0,s.Uk)("Email "),(0,s._)("span",{class:"text-danger"},"*")],-1),y={class:"mb-3"},V=(0,s._)("label",{for:"name",class:"form-label"},[(0,s.Uk)("收件人姓名 "),(0,s._)("span",{class:"text-danger"},"*")],-1),$={class:"mb-3"},D=(0,s._)("label",{for:"tel",class:"form-label"},[(0,s.Uk)("收件人電話 "),(0,s._)("span",{class:"text-danger"},"*")],-1),U={class:"mb-3"},W=(0,s._)("label",{for:"address",class:"form-label"},[(0,s.Uk)("收件人地址 "),(0,s._)("span",{class:"text-danger"},"*")],-1),C={class:"mb-3"},L=(0,s._)("label",{for:"message",class:"form-label"},"留言",-1),P={class:"text-end"},S=["disabled"];function z(e,a,l,z,E,q){const I=(0,s.up)("vue-loading"),M=(0,s.up)("vue-Field"),F=(0,s.up)("ErrorMessage"),O=(0,s.up)("vue-Form");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s.Wm)(I,{active:E.isLoading,"is-full-page":E.fullPage,"background-color":"black"},{default:(0,s.w5)((()=>[n])),_:1},8,["active","is-full-page"]),c,(0,s._)("table",o,[d,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(E.cartData.carts,(a=>((0,s.wg)(),(0,s.iD)("tr",{key:a.id},[(0,s._)("td",null,(0,t.zw)(a.product.title),1),(0,s._)("td",null,(0,t.zw)(a.qty)+" "+(0,t.zw)(a.product.unit),1),(0,s._)("td",null,(0,t.zw)(e.$filters.currency(a.product.price)),1),(0,s._)("td",u,[m,(0,s.Uk)(" "+(0,t.zw)(e.$filters.currency(a.total)),1)])])))),128))]),(0,s._)("tfoot",null,[(0,s._)("tr",null,[p,h,f,(0,s._)("td",_,[(0,s.Uk)("總計： "+(0,t.zw)(e.$filters.currency(E.cartData.total))+" ",1),E.cartData.final_total!==E.cartData.total?((0,s.wg)(),(0,s.iD)("span",g,[b,(0,s.Uk)("優惠價： "+(0,t.zw)(e.$filters.currency(E.cartData.final_total)),1)])):(0,s.kq)("",!0)])])])]),v,(0,s._)("div",w,[(0,s.Wm)(O,{ref:"form",class:"col-md-6",onSubmit:q.sendOrder},{default:(0,s.w5)((({errors:e})=>[(0,s._)("div",k,[x,(0,s.Wm)(M,{id:"email",name:"email",type:"email",class:(0,t.C_)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:E.form.user.email,"onUpdate:modelValue":a[0]||(a[0]=e=>E.form.user.email=e)},null,8,["class","modelValue"]),(0,s.Wm)(F,{name:"email",class:"invalid-feedback"})]),(0,s._)("div",y,[V,(0,s.Wm)(M,{id:"name",name:"姓名",type:"text",class:(0,t.C_)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:E.form.user.name,"onUpdate:modelValue":a[1]||(a[1]=e=>E.form.user.name=e)},null,8,["class","modelValue"]),(0,s.Wm)(F,{name:"姓名",class:"invalid-feedback"})]),(0,s._)("div",$,[D,(0,s.Wm)(M,{id:"tel",name:"電話",type:"tel",class:(0,t.C_)(["form-control",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",rules:q.isPhone,modelValue:E.form.user.tel,"onUpdate:modelValue":a[2]||(a[2]=e=>E.form.user.tel=e)},null,8,["class","rules","modelValue"]),(0,s.Wm)(F,{name:"電話",class:"invalid-feedback"})]),(0,s._)("div",U,[W,(0,s.Wm)(M,{id:"address",name:"地址",type:"text",class:(0,t.C_)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:E.form.user.address,"onUpdate:modelValue":a[3]||(a[3]=e=>E.form.user.address=e)},null,8,["class","modelValue"]),(0,s.Wm)(F,{name:"地址",class:"invalid-feedback"})]),(0,s._)("div",C,[L,(0,s.wy)((0,s._)("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":a[4]||(a[4]=e=>E.form.message=e)},null,512),[[r.nr,E.form.message]])]),(0,s._)("div",P,[(0,s._)("button",{type:"submit",class:"btn btn-danger btn-lg",disabled:Object.keys(e).length>0||0==E.cartData.final_total}," 送出訂單 ",8,S)])])),_:1},8,["onSubmit"])])])}var E=l(4902),q={data(){return{cartData:{},products:[],productId:"",isLoading:!1,fullPage:!0,isLoadingitem:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getProducts(){const e=this;e.isLoading=!0,this.$http.get("https://vue3-course-api.hexschool.io/v2/api/tsuei/products/all").then((a=>{this.products=a.data.products,e.isLoading=!1})).catch((e=>{this.$httpMessageState(e.response,"錯誤！")}))},getCart(){const e=this;e.isLoading=!0,this.$http.get("https://vue3-course-api.hexschool.io/v2/api/tsuei/cart").then((a=>{this.cartData=a.data.data,e.isLoading=!1})).catch((e=>{this.$httpMessageState(e.response,"錯誤！")}))},sendOrder(){this.isLoadingitem=1;const e=this.form;this.$http.post("https://vue3-course-api.hexschool.io/v2/api/tsuei/order",{data:e}).then((()=>{this.isLoadingitem="",E.Z.emit("get-cart"),this.getCart(),alert("訂單已送出！"),this.$refs.form.resetForm(),this.$router.push("/cartfinish")})).catch((e=>{this.$httpMessageState(e.response,"錯誤！")}))},isPhone(e){const a=/^(09)[0-9]{8}$/;return!!a.test(e)||"需要正確的電話號碼"}},mounted(){this.getProducts(),this.getCart()}},I=l(3744);const M=(0,I.Z)(q,[["render",z]]);var F=M}}]);
//# sourceMappingURL=480.29d82a91.js.map