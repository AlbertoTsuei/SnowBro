"use strict";(self["webpackChunkweek6"]=self["webpackChunkweek6"]||[]).push([[751],{9751:function(t,e,i){i.r(e),i.d(e,{default:function(){return G}});var s=i(6252),a=i(3577),o=i(9963);const n={class:"container"},c=(0,s._)("h2",{class:"text-center mb-3"},"產品列表",-1),r=(0,s._)("div",{class:"loading-ice"},null,-1),l={class:"row"},d={class:"d-block col-12 col-lg-3"},p={class:"list-group my-3"},u={class:"row row-cols-2 row-cols-md-1"},g={class:"col d-flex justify-content-center"},h={class:"col d-flex justify-content-center"},b={class:"col d-flex justify-content-center"},v={class:"col d-flex justify-content-center"},_={class:"col d-flex justify-content-center"},m={class:"col d-flex justify-content-center"},f={class:"col-12 col-lg-9"},y={class:"row row-cols-1 row-cols-lg-3","data-aos":"zoom-in-down","data-aos-duration":"1200"},k=["onClick"],C={class:"card h-100"},w={class:"card-body"},x={class:"card-title"},$={class:"card-text text-muted mb-0 card-descrip"},P={class:"d-flex justify-content-between mt-3"},M=["onClick"],L={key:0},S=(0,s._)("span",{class:"material-icons text-danger align-middle"},"favorite",-1),T=[S],j={key:1},D=(0,s._)("span",{class:"material-icons text-dark align-middle"},"favorite",-1),N=[D],O=["onClick","disabled"],z={key:0},F={class:"mb-3"},I={"aria-label":"Page navigation example"},q={class:"pagination justify-content-center"},H=(0,s._)("span",{"aria-hidden":"true"},"«",-1),J=[H],K=["onClick"],W=(0,s._)("span",{"aria-hidden":"true"},"»",-1),Y=[W];function Z(t,e,i,S,D,H){const W=(0,s.up)("vue-loading"),Z=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",n,[c,(0,s.Wm)(W,{active:D.isLoading,"is-full-page":D.fullPage,"background-color":"black"},{default:(0,s.w5)((()=>[r])),_:1},8,["active","is-full-page"]),(0,s._)("div",l,[(0,s._)("div",d,[(0,s._)("div",p,[(0,s._)("div",u,[(0,s._)("div",g,[(0,s._)("button",{type:"button",class:"btn btn-primary list-group-item list-group-item-action cart-btn",onClick:e[0]||(e[0]=t=>H.getProducts())}," 全部商品 ")]),(0,s._)("div",h,[(0,s._)("button",{type:"button",class:"btn btn-primary list-group-item list-group-item-action cart-btn",onClick:e[1]||(e[1]=t=>H.getCategory("滑雪服"))}," 滑雪服 ")]),(0,s._)("div",b,[(0,s._)("button",{type:"button",class:"btn btn-primary list-group-item list-group-item-action cart-btn",onClick:e[2]||(e[2]=t=>H.getCategory("雪板"))}," 雪板 ")]),(0,s._)("div",v,[(0,s._)("button",{type:"button",class:"btn btn-primary list-group-item list-group-item-action cart-btn",onClick:e[3]||(e[3]=t=>H.getCategory("護目鏡"))}," 護目鏡 ")]),(0,s._)("div",_,[(0,s._)("button",{type:"button",class:"btn btn-primary list-group-item list-group-item-action cart-btn",onClick:e[4]||(e[4]=t=>H.getCategory("手套"))}," 手套 ")]),(0,s._)("div",m,[(0,s._)("button",{type:"button",class:"btn btn-primary list-group-item list-group-item-action cart-btn",onClick:e[5]||(e[5]=t=>H.getCategory("安全帽"))}," 安全帽 ")])])])]),(0,s._)("div",f,[(0,s._)("div",y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(D.products,(i=>((0,s.wg)(),(0,s.iD)("div",{class:"col mb-3",key:i.id,onClick:t=>H.goToProduct(i.id)},[(0,s._)("div",C,[(0,s.Wm)(Z,{to:`/product/${i.id}`,style:(0,a.j5)({backgroundImage:`url(${i.imageUrl})`}),class:"product-image"},null,8,["to","style"]),(0,s._)("div",w,[(0,s._)("h5",x,(0,a.zw)(i.title),1),(0,s._)("p",$,(0,a.zw)(i.description),1),(0,s._)("div",P,[(0,s._)("button",{type:"button",class:"btn btn-outline-info",onClick:e[6]||(e[6]=(0,o.iM)((e=>H.goToProduct(t.item.id)),["prevent"]))}," 產品細節 "),(0,s._)("button",{type:"button",class:"btn btn-outline-info",onClick:(0,o.iM)((t=>H.toggleFavorite(i.id)),["prevent"])},[D.favorite.includes(i.id)?((0,s.wg)(),(0,s.iD)("div",L,T)):((0,s.wg)(),(0,s.iD)("div",j,N))],8,M),(0,s._)("button",{type:"button",class:"btn btn-outline-danger",onClick:(0,o.iM)((t=>H.addToCart(i.id)),["prevent"]),disabled:D.isLoadingitem===i.id||i.qty>5}," 加到購物車 ",8,O)])])])],8,k)))),128))]),D.isNotOption?((0,s.wg)(),(0,s.iD)("div",z,[(0,s._)("div",F,[(0,s._)("nav",I,[(0,s._)("ul",q,[(0,s._)("li",{class:(0,a.C_)(["page-item",{disabled:!D.pages.has_pre}])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[7]||(e[7]=(0,o.iM)((t=>H.getProducts(D.pages.current_page-1)),["prevent"]))},J)],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(D.pages.total_pages,(t=>((0,s.wg)(),(0,s.iD)("li",{class:(0,a.C_)(["page-item",{active:t===D.pages.current_page}]),key:t+"page"},[(0,s._)("a",{class:"page-link",href:"#",onClick:(0,o.iM)((e=>H.getProducts(t)),["prevent"])},(0,a.zw)(t),9,K)],2)))),128)),(0,s._)("li",{class:(0,a.C_)(["page-item",{disabled:!D.pages.has_next}])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[8]||(e[8]=(0,o.iM)((t=>H.getProducts(D.pages.current_page+1)),["prevent"]))},Y)],2)])])])])):(0,s.kq)("",!0)])])])}var U=i(4902),A={data(){return{products:[],isLoadingitem:"",pages:{},favorite:JSON.parse(localStorage.getItem("favorite"))||[],isLoading:!1,fullPage:!0,isNotOption:!0,forToastTrue:{data:{success:!0}},forToastFalse:{data:{success:0}}}},methods:{getProducts(t=1){const e=this;e.isLoading=!0,this.$http(`https://vue3-course-api.hexschool.io/v2/api/tsuei/products?page=${t}`).then((t=>{this.products=t.data.products,this.pages=t.data.pagination,e.isLoading=!1,this.isNotOption=!0})).catch((t=>{this.$httpMessageState(t.response,"錯誤！")}))},getCategory(t){const e=this;e.isLoading=!0,this.$http(`https://vue3-course-api.hexschool.io/v2/api/tsuei/products?category=${t}`).then((t=>{this.products=t.data.products,this.isNotOption=!1,e.isLoading=!1})).catch((t=>{this.$httpMessageState(t.response,"錯誤！")}))},addToCart(t,e=1){const i={product_id:t,qty:e},s=this;s.isLoading=!0,this.isLoadingitem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/tsuei/cart",{data:i}).then((t=>{this.isLoadingitem="",U.Z.emit("get-cart"),this.getCart(),s.isLoading=!1,this.$httpMessageState(t,"已加入購物車")})).catch((t=>{this.$httpMessageState(t.response,"錯誤！")})),event.stopPropagation()},getCart(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/tsuei/cart").then((t=>{this.cartData=t.data.data})).catch((t=>{this.$httpMessageState(t.response,"錯誤！")}))},toggleFavorite(t){const e=this.favorite.findIndex((e=>e===t));-1===e?(this.favorite.push(t),this.$httpMessageState(this.forToastTrue,"加入最愛")):(this.favorite.splice(e,1),this.$httpMessageState(this.forToastFalse,"移出最愛")),event.stopPropagation()},goToProduct(t){this.$router.push(`/product/${t}`)}},watch:{favorite:{handler(){localStorage.setItem("favorite",JSON.stringify(this.favorite))},deep:!0}},mounted(){this.getProducts()}},B=i(3744);const E=(0,B.Z)(A,[["render",Z]]);var G=E}}]);
//# sourceMappingURL=751.2ef7f0eb.js.map