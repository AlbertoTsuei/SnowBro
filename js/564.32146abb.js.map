{"version":3,"file":"js/564.32146abb.js","mappings":"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","sources":["webpack://week6/./src/views/front/CartView.vue","webpack://week6/./src/views/front/CartView.vue?36d0"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <!-- Loading -->\n    <vue-loading\n      :active=\"isLoading\"\n      :is-full-page=\"fullPage\"\n      background-color=\"black\"\n    >\n      <div class=\"loading-ice\"></div>\n    </vue-loading>\n    <!-- 購物流程 -->\n    <ul class=\"cart-intro\">\n      <li class=\"cart-card\">\n        <div class=\"cardImg cart-now cart-now-border\">\n          <span class=\"material-icons\"> shopping_cart </span>\n        </div>\n        <h4 class=\"cart-now\">STEP.1</h4>\n        <p class=\"cart-now\">確認選購</p>\n      </li>\n      <li class=\"cart-card\">\n        <div class=\"cardImg\">\n          <span class=\"material-icons\"> format_list_bulleted </span>\n        </div>\n        <h4>STEP.2</h4>\n        <p>資料填寫</p>\n      </li>\n      <li class=\"cart-card\">\n        <div class=\"cardImg\">\n          <span class=\"material-icons\"> done </span>\n        </div>\n        <h4>STEP.3</h4>\n        <p>預定成功</p>\n      </li>\n    </ul>\n    <!-- 購物車列表 -->\n    <div v-if=\"cartData.total\">\n      <div class=\"text-end\">\n        <button\n          class=\"btn btn-outline-danger\"\n          type=\"button\"\n          @click=\"removeAllCart\"\n          :disabled=\"cartData.final_total == 0 || isLoadingitem === 1\"\n        >\n          清空購物車\n        </button>\n      </div>\n      <div></div>\n      <table class=\"table align-middle\">\n        <thead>\n          <tr>\n            <th></th>\n            <th>品名</th>\n            <th>數量/單位</th>\n            <th>單價</th>\n          </tr>\n        </thead>\n        <tbody>\n          <template v-if=\"cartData.carts\">\n            <tr v-for=\"item in cartData.carts\" :key=\"item.id\">\n              <td>\n                <button\n                  type=\"button\"\n                  class=\"btn btn-outline-danger btn-sm\"\n                  @click=\"removeCartItem(item.id)\"\n                  :disabled=\"isLoadingitem === item.id\"\n                >\n                  x\n                </button>\n              </td>\n              <td>\n                {{ item.product.title }}\n              </td>\n              <td>\n                <div class=\"input-group input-group-sm\">\n                  <div class=\"input-group\">\n                    <select\n                      id=\"\"\n                      class=\"form-select\"\n                      v-model=\"item.qty\"\n                      @change=\"updateCartItem(item)\"\n                      :disabled=\"isLoadingitem === item.id\"\n                    >\n                      <option\n                        :value=\"num\"\n                        v-for=\"num in 20\"\n                        :key=\"`${num}${item.id}`\"\n                      >\n                        {{ num }}\n                      </option>\n                    </select>\n                    <span class=\"input-group-text\" id=\"basic-addon2\">{{\n                      item.product.unit\n                    }}</span>\n                  </div>\n                </div>\n              </td>\n              <td>{{ $filters.currency(item.product.price) }}</td>\n              <td class=\"text-end\">\n                <small>品項金額：</small>\n                {{ $filters.currency(item.total) }}\n              </td>\n            </tr>\n          </template>\n        </tbody>\n        <tfoot>\n          <tr>\n            <td />\n            <td />\n            <td />\n            <td />\n            <td class=\"text-end text-success\">總計： {{ $filters.currency(cartData.total) }}\n              <span v-if=\"cartData.final_total !== cartData.total\" class=\"text-info\">\n                <br>優惠價： {{ $filters.currency(cartData.final_total) }}\n              </span>\n            </td>\n          </tr>\n        </tfoot>\n      </table>\n      <div class=\"input-group mb-3 input-group-sm\">\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          v-model=\"coupon_code\"\n          placeholder=\"請輸入優惠代碼\"\n        />\n        <div class=\"input-group-append\">\n          <button\n            class=\"btn btn-outline-info\"\n            type=\"button\"\n            @click=\"addCouponCode\"\n          >\n            輸入優惠代碼\n          </button>\n        </div>\n      </div>\n      <button\n        type=\"button\"\n        class=\"btn btn-danger btn-lg d-block mx-auto mb-3\"\n        :disabled=\"cartData.final_total == 0\"\n        @click.prevent=\"goToSheet\"\n      >\n        前往結帳\n      </button>\n    </div>\n    <!-- 購物車無品項 -->\n    <div v-else>\n      <div class=\"mt-3 cart-view-banner\"></div>\n      <h4 class=\"mt-3 text-info text-center\">購物車目前沒有商品</h4>\n      <button\n        type=\"button\"\n        class=\"btn btn-danger btn-lg d-block mx-auto my-3\"\n        @click.prevent=\"goToProducts\"\n      >\n        參觀選購\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/libs/emitter'\n\nexport default {\n  data () {\n    return {\n      cartData: {},\n      products: [],\n      productId: '',\n      isLoadingitem: '',\n      isLoading: false,\n      fullPage: true,\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: ''\n        },\n        message: ''\n      },\n      coupon_code: '',\n      forToastFalse: {\n        data: {\n          success: 0\n        }\n      }\n    }\n  },\n  methods: {\n    getProducts () {\n      const vm = this\n      vm.isLoading = true\n      this.$http\n        .get(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`\n        )\n        .then((res) => {\n          this.products = res.data.products\n          vm.isLoading = false\n        })\n        .catch((err) => {\n          this.$httpMessageState(err.response, '錯誤！')\n        })\n    },\n    getCart () {\n      this.$http\n        .get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`)\n        .then((res) => {\n          this.cartData = res.data.data\n        })\n        .catch((err) => {\n          this.$httpMessageState(err.response, '錯誤！')\n        })\n    },\n    updateCartItem (item) {\n      const data = {\n        product_id: item.id,\n        qty: item.qty\n      }\n      const vm = this\n      vm.isLoading = true\n      this.isLoadingitem = item.id\n      this.$http\n        .put(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${item.id}`,\n          { data }\n        )\n        .then((res) => {\n          this.getCart()\n          this.isLoadingitem = ''\n          vm.isLoading = false\n          this.$httpMessageState(res, '已更新購物車')\n        })\n        .catch((err) => {\n          this.$httpMessageState(err.response, '錯誤！')\n        })\n    },\n    removeCartItem (id) {\n      const vm = this\n      vm.isLoading = true\n      this.isLoadingitem = id\n      this.$http\n        .delete(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`\n        )\n        .then(() => {\n          emitter.emit('get-cart')\n          this.getCart()\n          this.isLoadingitem = ''\n          vm.isLoading = false\n          this.$httpMessageState(this.forToastFalse, '已刪除該品項')\n        })\n        .catch((err) => {\n          this.$httpMessageState(err.response, '錯誤！')\n        })\n    },\n    removeAllCart () {\n      const vm = this\n      vm.isLoading = true\n      this.isLoadingitem = 1\n      this.$http\n        .delete(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/carts`\n        )\n        .then(() => {\n          this.isLoadingitem = ''\n          emitter.emit('get-cart')\n          this.getCart()\n          vm.isLoading = false\n          this.$httpMessageState(this.forToastFalse, '已刪除全部購物車')\n        })\n        .catch((err) => {\n          this.$httpMessageState(err.response, '錯誤！')\n        })\n    },\n    addCouponCode () {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/coupon`\n      const coupon = {\n        code: this.coupon_code\n      }\n      this.isLoading = true\n      this.$http\n        .post(url, { data: coupon })\n        .then((res) => {\n          this.$httpMessageState(res, '加入優惠券')\n          this.getCart()\n          this.isLoading = false\n        })\n        .catch((err) => {\n          this.isLoading = false\n          this.$httpMessageState(err.response, '無此優惠券')\n        })\n    },\n    goToSheet () {\n      this.$router.push('/cartrecipient')\n    },\n    goToProducts () {\n      this.$router.push('/products')\n    }\n  },\n  mounted () {\n    this.getProducts()\n    this.getCart()\n  }\n}\n</script>\n\n<style>\n@media (max-width: 767px) {\n  .cart li {\n    margin-bottom: 20px;\n  }\n}\n\n.cart-intro {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  max-width: 700px;\n  margin: 0 auto;\n}\n\n@media (max-width: 767px) {\n  .cart-intro {\n    margin-top: 90px;\n    padding-left: 0;\n  }\n}\n\n.cart-intro li:nth-child(1),\n.cart-intro li:nth-child(2) {\n  position: relative;\n}\n\n.cart-intro li:nth-child(1)::after,\n.cart-intro li:nth-child(2)::after {\n  content: '';\n  position: absolute;\n  top: 49px;\n  right: -55px;\n  border: 10px solid #000000;\n  border-top: 10px solid transparent;\n  border-right: 10px solid transparent;\n  border-bottom: 10px solid transparent;\n}\n\n@media (max-width: 767px) {\n  .cart-intro li:nth-child(1)::after,\n  .cart-intro li:nth-child(2)::after {\n    top: 49px;\n    right: -35px;\n  }\n}\n\n.cart-card {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n}\n\n.cart-card .cardImg {\n  width: 115px;\n  height: 115px;\n  border: 3px solid #000000;\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.cart-card .material-icons {\n  font-size: 50px;\n}\n\n.cart-card h4 {\n  font-size: 1.25rem;\n  font-weight: bold;\n}\n\n@media (max-width: 767px) {\n  .cart-card .cardImg {\n    width: 75px;\n    height: 75px;\n  }\n}\n.cart-card .cart-now {\n  color: rgba(220, 113, 6, 0.865);\n}\n\n.cart-card .cart-now-border {\n  border: 3px solid rgba(220, 113, 6, 0.865);\n}\n\n.cart-view-banner {\n  position: relative;\n  background-image: url('@/photos/cart-view-banner.jpeg');\n  background-position: 50% 30%;\n  background-repeat: no-repeat;\n  background-size: cover;\n  min-height: 280px;\n}\n</style>\n","import { render } from \"./CartView.vue?vue&type=template&id=71561650\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport \"./CartView.vue?vue&type=style&index=0&id=71561650&lang=css\"\n\nimport exportComponent from \"/Users/alberto/Vue/temp/Vue_SnowBro/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","id","_createElementBlock","_createVNode","_component_vue_loading","active","$data","_hoisted_2","_hoisted_3","total","_hoisted_4","type","onClick","$options","disabled","final_total","_hoisted_6","_hoisted_7","_hoisted_9","carts","_Fragment","key","_renderList","item","_hoisted_10","_toDisplayString","product","title","qty","$event","onChange","num","value","_hoisted_14","unit","_ctx","currency","price","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_24","placeholder","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","data","cartData","products","productId","isLoadingitem","isLoading","fullPage","form","user","name","email","tel","address","message","coupon_code","forToastFalse","success","methods","getProducts","vm","this","$http","get","then","res","catch","err","$httpMessageState","response","getCart","updateCartItem","product_id","put","removeCartItem","delete","emitter","removeAllCart","addCouponCode","url","coupon","code","post","goToSheet","$router","push","goToProducts","mounted","__exports__","render"],"sourceRoot":""}